coord_cartesian(expand = F) +
theme_ms() +
theme(axis.text.y = element_blank(),
axis.text.x = element_text(size = 6),
legend.text = element_text(size = 7),
legend.position = c(0.1,0.85),
panel.grid.major.y = element_blank(),
panel.background = element_rect(fill='transparent', color = NA),
plot.background = element_rect(fill='transparent', color=NA),
legend.background = element_rect(fill='transparent',color = NA))
ggsave("bgimage2.png", dpi = 320, width = 8, height = 2, bg = "transparent")
plotdat |> filter(!Art %in% c("Sonstige Brennstoffe","Geothermie")) |>
ggplot(aes(x = Jahr, y = Value, group = Type, fill = Type)) +
geom_stream(type = "mirror") +
scale_fill_manual(values = cols, name = "",
guide = guide_legend(keywidth = 0.5, keyheight = 0.3, label.theme = element_text(size = 5))) +
scale_x_date(position = "bottom") +
labs(x=NULL, y=NULL) +
coord_cartesian(expand = F) +
theme_ms() +
theme(axis.text.y = element_blank(),
axis.text.x = element_text(size = 6),
legend.text = element_text(size = 7),
legend.position = c(0.05, 0.9),
panel.grid.major.y = element_blank(),
panel.background = element_rect(fill='transparent', color = NA),
plot.background = element_rect(fill='transparent', color=NA),
legend.background = element_rect(fill='transparent',color = NA))
ggsave("bgimage2.png", dpi = 320, width = 8, height = 2, bg = "transparent")
plotdat |> filter(!Art %in% c("Sonstige Brennstoffe","Geothermie")) |>
ggplot(aes(x = Jahr, y = Value, group = Type, fill = Type)) +
geom_stream(type = "mirror") +
scale_fill_manual(values = cols, name = "",
guide = guide_legend(keywidth = 0.5, keyheight = 0.3, label.theme = element_text(size = 5, family = "Roboto"))) +
scale_x_date(position = "bottom") +
labs(x=NULL, y=NULL) +
coord_cartesian(expand = F) +
theme_ms() +
theme(axis.text.y = element_blank(),
axis.text.x = element_text(size = 6),
legend.text = element_text(size = 7),
legend.position = c(0.1, 0.9),
panel.grid.major.y = element_blank(),
panel.background = element_rect(fill='transparent', color = NA),
plot.background = element_rect(fill='transparent', color=NA),
legend.background = element_rect(fill='transparent',color = NA))
plotdat |> filter(!Art %in% c("Sonstige Brennstoffe","Geothermie")) |>
ggplot(aes(x = Jahr, y = Value, group = Type, fill = Type)) +
geom_stream(type = "mirror") +
scale_fill_manual(values = cols, name = "",
guide = guide_legend(keywidth = 0.5, keyheight = 0.3, label.theme = element_text(size = 5, family = "Raleway"))) +
scale_x_date(position = "bottom") +
labs(x=NULL, y=NULL) +
coord_cartesian(expand = F) +
theme_ms() +
theme(axis.text.y = element_blank(),
axis.text.x = element_text(size = 6),
legend.text = element_text(size = 7),
legend.position = c(0.1, 0.9),
panel.grid.major.y = element_blank(),
panel.background = element_rect(fill='transparent', color = NA),
plot.background = element_rect(fill='transparent', color=NA),
legend.background = element_rect(fill='transparent',color = NA))
ggsave("bgimage2.png", dpi = 320, width = 8, height = 2, bg = "transparent")
plotdat |> filter(!Art %in% c("Sonstige Brennstoffe","Geothermie")) |>
ggplot(aes(x = Jahr, y = Value, group = Type, fill = Type)) +
geom_stream(type = "mirror") +
scale_fill_manual(values = cols, name = "",
guide = guide_legend(keywidth = 0.5, keyheight = 0.3, label.theme = element_text(size = 5, family = "Raleway"))) +
scale_x_date(position = "bottom") +
labs(x=NULL, y=NULL) +
coord_cartesian(expand = F) +
theme_ms() +
theme(axis.text.y = element_blank(),
axis.text.x = element_text(size = 6),
legend.text = element_text(size = 7),
legend.position = c(0.1, 0.1),
panel.grid.major.y = element_blank(),
panel.background = element_rect(fill='transparent', color = NA),
plot.background = element_rect(fill='transparent', color=NA),
legend.background = element_rect(fill='transparent',color = NA))
plotdat |> filter(!Art %in% c("Sonstige Brennstoffe","Geothermie")) |>
ggplot(aes(x = Jahr, y = Value, group = Type, fill = Type)) +
geom_stream(type = "mirror") +
scale_fill_manual(values = cols, name = "",
guide = guide_legend(keywidth = 0.5, keyheight = 0.3, label.theme = element_text(size = 5, family = "Raleway"))) +
scale_x_date(position = "bottom") +
labs(x=NULL, y=NULL) +
coord_cartesian(expand = F) +
theme_ms() +
theme(axis.text.y = element_blank(),
axis.text.x = element_text(size = 6),
legend.text = element_text(size = 7),
legend.position = c(0.1, 0.2),
panel.grid.major.y = element_blank(),
panel.background = element_rect(fill='transparent', color = NA),
plot.background = element_rect(fill='transparent', color=NA),
legend.background = element_rect(fill='transparent',color = NA))
plotdat |> filter(!Art %in% c("Sonstige Brennstoffe","Geothermie")) |>
ggplot(aes(x = Jahr, y = Value, group = Art, fill = Art)) +
geom_stream(type = "mirror") +
scale_fill_manual(values = cols, name = "",
guide = guide_legend(keywidth = 0.5, keyheight = 0.3, label.theme = element_text(size = 5, family = "Raleway"))) +
scale_x_date(position = "bottom") +
labs(x=NULL, y=NULL) +
coord_cartesian(expand = F) +
theme_ms() +
theme(axis.text.y = element_blank(),
axis.text.x = element_text(size = 6),
legend.text = element_text(size = 7),
legend.position = c(0.1, 0.2),
panel.grid.major.y = element_blank(),
panel.background = element_rect(fill='transparent', color = NA),
plot.background = element_rect(fill='transparent', color=NA),
legend.background = element_rect(fill='transparent',color = NA))
plotdat |> filter(!Art %in% c("Sonstige Brennstoffe","Geothermie")) |>
ggplot(aes(x = Jahr, y = Value, group = Art, fill = Art)) +
geom_stream(type = "mirror") +
geom_hline(yintercept = 0) +
scale_fill_manual(values = cols, name = "",
guide = guide_legend(keywidth = 0.5, keyheight = 0.3, label.theme = element_text(size = 5, family = "Raleway"))) +
scale_x_date(position = "bottom") +
labs(x=NULL, y=NULL) +
coord_cartesian(expand = F) +
theme_ms() +
theme(axis.text.y = element_blank(),
axis.text.x = element_text(size = 6),
legend.text = element_text(size = 7),
legend.position = c(0.1, 0.2),
panel.grid.major.y = element_blank(),
panel.background = element_rect(fill='transparent', color = NA),
plot.background = element_rect(fill='transparent', color=NA),
legend.background = element_rect(fill='transparent',color = NA))
plotdat |> filter(!Art %in% c("Sonstige Brennstoffe","Geothermie")) |>
ggplot(aes(x = Jahr, y = Value, group = Art, fill = Art)) +
geom_stream(type = "mirror") +
geom_hline(yintercept = 0, color = "white") +
scale_fill_manual(values = cols, name = "",
guide = guide_legend(keywidth = 0.5, keyheight = 0.3, label.theme = element_text(size = 5, family = "Raleway"))) +
scale_x_date(position = "bottom") +
labs(x=NULL, y=NULL) +
coord_cartesian(expand = F) +
theme_ms() +
theme(axis.text.y = element_blank(),
axis.text.x = element_text(size = 6),
legend.text = element_text(size = 7),
legend.position = c(0.1, 0.2),
panel.grid.major.y = element_blank(),
panel.background = element_rect(fill='transparent', color = NA),
plot.background = element_rect(fill='transparent', color=NA),
legend.background = element_rect(fill='transparent',color = NA))
plotdat |> filter(!Art %in% c("Sonstige Brennstoffe","Geothermie")) |>
ggplot(aes(x = Jahr, y = Value, group = Art, fill = Art)) +
geom_stream(type = "mirror") +
geom_hline(yintercept = 0, color = "white", linewidth = 0.3) +
scale_fill_manual(values = cols, name = "",
guide = guide_legend(keywidth = 0.5, keyheight = 0.3, label.theme = element_text(size = 5, family = "Raleway"))) +
scale_x_date(position = "bottom") +
labs(x=NULL, y=NULL) +
coord_cartesian(expand = F) +
theme_ms() +
theme(axis.text.y = element_blank(),
axis.text.x = element_text(size = 6),
legend.text = element_text(size = 7),
legend.position = c(0.1, 0.2),
panel.grid.major.y = element_blank(),
panel.background = element_rect(fill='transparent', color = NA),
plot.background = element_rect(fill='transparent', color=NA),
legend.background = element_rect(fill='transparent',color = NA))
plotdat |> filter(!Art %in% c("Sonstige Brennstoffe","Geothermie")) |>
ggplot(aes(x = Jahr, y = Value, group = Art, fill = Art)) +
geom_stream(type = "mirror") +
geom_hline(yintercept = 0, color = "white", linewidth = 0.1) +
scale_fill_manual(values = cols, name = "",
guide = guide_legend(keywidth = 0.5, keyheight = 0.3, label.theme = element_text(size = 5, family = "Raleway"))) +
scale_x_date(position = "bottom") +
labs(x=NULL, y=NULL) +
coord_cartesian(expand = F) +
theme_ms() +
theme(axis.text.y = element_blank(),
axis.text.x = element_text(size = 6),
legend.text = element_text(size = 7),
legend.position = c(0.1, 0.2),
panel.grid.major.y = element_blank(),
panel.background = element_rect(fill='transparent', color = NA),
plot.background = element_rect(fill='transparent', color=NA),
legend.background = element_rect(fill='transparent',color = NA))
plotdat |> filter(!Art %in% c("Sonstige Brennstoffe","Geothermie")) |>
ggplot(aes(x = Jahr, y = Value, group = Art, fill = Art)) +
geom_stream(type = "mirror") +
geom_hline(yintercept = 0, color = "white", linewidth = 0.1) +
scale_fill_manual(values = cols, name = "",
guide = guide_legend(keywidth = 0.5, keyheight = 0.3,
label.theme = element_text(size = 5, family = "Raleway"))) +
scale_x_date(position = "none") +
labs(x=NULL, y=NULL) +
coord_cartesian(expand = F) +
theme_ms() +
theme(axis.text.y = element_blank(),
axis.text.x = element_text(size = 6),
legend.text = element_text(size = 7),
legend.position = c(0.1, 0.2),
panel.grid.major.y = element_blank(),
panel.background = element_rect(fill='transparent', color = NA),
plot.background = element_rect(fill='transparent', color=NA),
legend.background = element_rect(fill='transparent',color = NA))
plotdat |> filter(!Art %in% c("Sonstige Brennstoffe","Geothermie")) |>
ggplot(aes(x = Jahr, y = Value, group = Art, fill = Art)) +
geom_stream(type = "mirror") +
geom_hline(yintercept = 0, color = "white", linewidth = 0.1) +
scale_fill_manual(values = cols, name = "",
guide = guide_legend(keywidth = 0.5, keyheight = 0.3,
label.theme = element_text(size = 5, family = "Raleway"))) +
#scale_x_date(position = "bottom") +
labs(x=NULL, y=NULL) +
coord_cartesian(expand = F) +
theme_ms() +
theme(axis.text.y = element_blank(),
axis.text.x = element_text(size = 6),
legend.text = element_text(size = 7),
legend.position = c(0.1, 0.2),
panel.grid.major.y = element_blank(),
panel.background = element_rect(fill='transparent', color = NA),
plot.background = element_rect(fill='transparent', color=NA),
legend.background = element_rect(fill='transparent',color = NA))
plotdat |> filter(!Art %in% c("Sonstige Brennstoffe","Geothermie")) |>
ggplot(aes(x = Jahr, y = Value, group = Art, fill = Art)) +
geom_stream(type = "mirror") +
geom_hline(yintercept = 0, color = "white", linewidth = 0.1) +
scale_fill_manual(values = cols, name = "",
guide = guide_legend(keywidth = 0.5, keyheight = 0.3,
label.theme = element_text(size = 5, family = "Raleway"))) +
scale_x_date(position = "bottom") +
labs(x=NULL, y=NULL) +
coord_cartesian(expand = F) +
theme_ms() +
theme(axis.text.y = element_blank(),
axis.text.x = element_text(size = 6),
legend.text = element_text(size = 7),
legend.position = c(0.1, 0.2),
panel.grid.major.y = element_blank(),
panel.grid.major.x = element_blank(),
panel.background = element_rect(fill='transparent', color = NA),
plot.background = element_rect(fill='transparent', color=NA),
legend.background = element_rect(fill='transparent',color = NA))
plotdat |> filter(!Art %in% c("Sonstige Brennstoffe","Geothermie")) |>
ggplot(aes(x = Jahr, y = Value, group = Art, fill = Art)) +
geom_stream(type = "mirror") +
scale_fill_manual(values = cols, name = "",
guide = guide_legend(keywidth = 0.5, keyheight = 0.3,
label.theme = element_text(size = 5, family = "Raleway"))) +
scale_x_date(position = "bottom") +
labs(x=NULL, y=NULL) +
coord_cartesian(expand = F) +
theme_ms() +
theme(axis.text.y = element_blank(),
axis.text.x = element_text(size = 6),
legend.text = element_text(size = 7),
legend.position = c(0.1, 0.2),
panel.grid.major.y = element_blank(),
panel.grid.major.x = element_blank(),
panel.background = element_rect(fill='transparent', color = NA),
plot.background = element_rect(fill='transparent', color=NA),
legend.background = element_rect(fill='transparent',color = NA))
plotdat |> filter(!Art %in% c("Sonstige Brennstoffe","Geothermie")) |>
ggplot(aes(x = Jahr, y = Value, group = Art, fill = Art)) +
geom_stream(type = "mirror") +
scale_fill_manual(values = cols, name = "",
guide = guide_legend(keywidth = 0.5, keyheight = 0.3,
label.theme = element_text(size = 5, family = "Raleway"))) +
#  scale_x_date(position = "bottom") +
labs(x=NULL, y=NULL) +
coord_cartesian(expand = F) +
theme_ms() +
theme(axis.text.y = element_blank(),
axis.text.x = element_text(size = 6),
legend.text = element_text(size = 7),
legend.position = c(0.1, 0.2),
panel.grid.major.y = element_blank(),
panel.grid.major.x = element_blank(),
panel.background = element_rect(fill='transparent', color = NA),
plot.background = element_rect(fill='transparent', color=NA),
legend.background = element_rect(fill='transparent',color = NA))
plotdat |> filter(!Art %in% c("Sonstige Brennstoffe","Geothermie")) |>
ggplot(aes(x = Jahr, y = Value, group = Art, fill = Art)) +
geom_stream(type = "mirror") +
scale_fill_manual(values = cols, name = "",
guide = guide_legend(keywidth = 0.5, keyheight = 0.3,
label.theme = element_text(size = 5, family = "Raleway"))) +
scale_x_date(position = "bottom") +
labs(x=NULL, y=NULL) +
coord_cartesian(expand = F) +
theme_ms() +
theme(axis.text.y = element_blank(),
axis.text.x = element_blank(),
legend.text = element_text(size = 7),
legend.position = c(0.1, 0.2),
panel.grid.major.y = element_blank(),
panel.grid.major.x = element_blank(),
panel.background = element_rect(fill='transparent', color = NA),
plot.background = element_rect(fill='transparent', color=NA),
legend.background = element_rect(fill='transparent',color = NA))
ggsave("bgimage2.png", dpi = 320, width = 8, height = 2, bg = "transparent")
plotdat |> filter(!Art %in% c("Sonstige Brennstoffe","Geothermie")) |>
ggplot(aes(x = Jahr, y = Value, group = Art, fill = Art)) +
geom_stream(type = "mirror") +
scale_fill_manual(values = cols, name = "",
guide = guide_legend(keywidth = 0.5, keyheight = 0.3,
label.theme = element_text(size = 5, family = "Raleway"))) +
scale_x_date(position = "bottom") +
labs(x=NULL, y=NULL) +
coord_cartesian(expand = F) +
theme_ms() +
theme(axis.text.y = element_blank(),
axis.text.x = element_blank(),
legend.text = element_text(size = 7),
legend.position = "none",
panel.grid.major.y = element_blank(),
panel.grid.major.x = element_blank(),
panel.background = element_rect(fill='transparent', color = NA),
plot.background = element_rect(fill='transparent', color=NA),
legend.background = element_rect(fill='transparent',color = NA))
ggsave("bgimage2.png", dpi = 320, width = 8, height = 2, bg = "transparent")
setwd("~/Daten/Lehre/dataviz/img")
librarian::shelf(tidyverse, STATcubeR, janitor, ggstream, ggtext, colorspace, MetBrewer, msthemes)
# Load latest data from API
database <- "str:database:devpi15"
db_schema <- sc_schema_db(database)
einfluss <- db_schema$Influence$`Einfluss Vorjahresmonat`$id
coicop2 <- db_schema$`Mandatory Fields`$`Coicop 5-Steller`$`Coicop 2-Steller`$id
energie <- db_schema$`Mandatory Fields`$`Coicop 5-Steller`$`Coicop 3-Steller`$id
time <- db_schema$`Mandatory Fields`$Time$Time$id
inflation <- sc_table_custom(database, dimensions = c(time,coicop2), measures = einfluss,
language = "de")
energie <- sc_table_custom(database, dimensions = c(time,energie), measures = einfluss,
language = "de")
fin <- bind_rows(inflation$tabulate(),
energie$tabulate() |> filter(str_starts(`Coicop 5-Steller`, "04.5"))) |>
as.data.frame()
plotdat <- fin |>
drop_na() |>
rename(Datum=`Zeitraum der Erhebung`) |>
mutate(Datum = str_replace_all(Datum, "JÃ¤n", "Jan"),
Datum = dmy(paste("01", Datum), locale = "de_DE")) |>
pivot_wider(names_from = "Coicop 5-Steller", values_from = "Einfluss Vorjahresmonat") |>
clean_names() |>
mutate(`Wohnen & Haushalt` = x04_wohnung_wasser_energie - x04_5_aufwand_fur_energie +
x05_hausrat_instandhaltung_des_hauses,
Sonstige = x02_alkoholische_getranke_und_tabak + x03_bekleidung_und_schuhe +
x06_gesundheitspflege + x08_nachrichtenubermittlung +
x10_erziehung_und_unterricht + x12_verschiedene_waren_dienstleistungen) |>
select(Datum = datum,
Nahrungsmittel = x01_nahrungsmittel_alkoholfr_getranke,
`Wohnen & Haushalt`,
Energie = x04_5_aufwand_fur_energie,
Verkehr = x07_verkehr,
`Freizeit & Kultur` = x09_freizeit_und_kultur,
`Restaurants & Hotels` = x11_restaurants_und_hotels,
Sonstige)  |>
mutate(Inflation = rowSums(across(where(is.numeric)))) |>
pivot_longer(cols = -Datum, names_to = "Coicop", values_to = "Beitrag") |>
mutate(Coicop = factor(Coicop, levels = c("Sonstige", "Restaurants & Hotels","Freizeit & Kultur","Nahrungsmittel","Energie", "Wohnen & Haushalt", "Verkehr", "Inflation"))) |>
filter(Datum >= "2019-01-01")
plotdat %>% filter(!Coicop == "Inflation") %>%
ggplot(aes(x = Datum, y = Beitrag, group = Coicop, fill = Coicop)) +
geom_stream(type = "mirror") +
geom_segment(aes(x = Datum + 20, xend = Datum + 20,
y = -Beitrag/2, yend = Beitrag/2, fill = NULL),
data = lastdate, linewidth = 0.1, color = "gray40",
arrow = arrow(ends = "both", length = unit(0.1,"cm"), type = "closed")) +
scale_fill_manual(values = c("gray90", darken(met.brewer("Juarez"),.1)),
name = "", guide = guide_legend(reverse = TRUE, keywidth = 0.5)) +
scale_x_date(date_labels = "%b %y", position = "top",
breaks = seq(firstdate$Datum, lastdate$Datum, by="4 months")) +
coord_flip(expand = F, xlim = c(firstdate$Datum - 60, lastdate$Datum + 60),
ylim = c(-maxinflation/2, maxinflation/2)) +
labs(x=NULL, y=NULL) +
theme_ms() +
theme(legend.position = c(0.8,0.27),
legend.background = element_rect(fill = "white", colour = NA),
legend.text = element_text(size = 9, family = "Raleway"),
panel.grid.major.x = element_blank(),
axis.text.y = element_text(family = "Raleway", color = "gray50", size = 7),
axis.text.x = element_blank())
plotdat |>  filter(!Coicop == "Inflation") |>
ggplot(aes(x = Datum, y = Beitrag, group = Coicop, fill = Coicop)) +
geom_stream(type = "mirror") +
scale_fill_manual(values = c("gray90", darken(met.brewer("Juarez"),.1)),
name = "", guide = guide_legend(reverse = TRUE, keywidth = 0.5)) +
scale_x_date(date_labels = "%b %y", position = "top",
breaks = seq(firstdate$Datum, lastdate$Datum, by="4 months")) +
coord_flip(expand = F, xlim = c(firstdate$Datum - 60, lastdate$Datum + 60),
ylim = c(-maxinflation/2, maxinflation/2)) +
labs(x=NULL, y=NULL) +
theme_ms() +
theme(legend.position = c(0.8,0.27),
legend.background = element_rect(fill = "white", colour = NA),
legend.text = element_text(size = 9, family = "Raleway"),
panel.grid.major.x = element_blank(),
axis.text.y = element_text(family = "Raleway", color = "gray50", size = 7),
axis.text.x = element_blank())
plotdat |>  filter(!Coicop == "Inflation") |>
ggplot(aes(x = Datum, y = Beitrag, group = Coicop, fill = Coicop)) +
geom_stream(type = "mirror") +
scale_fill_manual(values = c("gray90", darken(met.brewer("Juarez"),.1)),
name = "", guide = guide_legend(reverse = TRUE, keywidth = 0.5)) +
scale_x_date(date_labels = "%b %y", position = "top",
breaks = seq(firstdate$Datum, lastdate$Datum, by="4 months")) +
labs(x=NULL, y=NULL) +
theme_ms() +
theme(legend.position = c(0.8,0.27),
legend.background = element_rect(fill = "white", colour = NA),
legend.text = element_text(size = 9, family = "Raleway"),
panel.grid.major.x = element_blank(),
axis.text.y = element_text(family = "Raleway", color = "gray50", size = 7),
axis.text.x = element_blank())
plotdat |>  filter(!Coicop == "Inflation") |>
ggplot(aes(x = Datum, y = Beitrag, group = Coicop, fill = Coicop)) +
geom_stream(type = "mirror") +
scale_fill_manual(values = c("gray90", darken(met.brewer("Juarez"),.1)),
name = "", guide = guide_legend(reverse = TRUE, keywidth = 0.5)) +
labs(x=NULL, y=NULL) +
theme_ms() +
theme(legend.position = c(0.8,0.27),
legend.background = element_rect(fill = "white", colour = NA),
legend.text = element_text(size = 9, family = "Raleway"),
panel.grid.major.x = element_blank(),
axis.text.y = element_text(family = "Raleway", color = "gray50", size = 7),
axis.text.x = element_blank())
plotdat |>  filter(!Coicop == "Inflation") |>
ggplot(aes(x = Datum, y = Beitrag, group = Coicop, fill = Coicop)) +
geom_stream(type = "mirror") +
scale_fill_manual(values = c("gray90", darken(met.brewer("Juarez"),.1)),
name = "", guide = guide_legend(reverse = TRUE, keywidth = 0.5)) +
labs(x=NULL, y=NULL) +
theme_ms() +
theme(legend.position = "none",
legend.background = element_rect(fill = "white", colour = NA),
legend.text = element_text(size = 9, family = "Raleway"),
panel.grid.major.x = element_blank(),
axis.text.y = element_text(family = "Raleway", color = "gray50", size = 7),
axis.text.x = element_blank())
plotdat |>  filter(!Coicop == "Inflation") |>
ggplot(aes(x = Datum, y = Beitrag, group = Coicop, fill = Coicop)) +
geom_stream(type = "mirror") +
scale_fill_manual(values = c("gray90", darken(met.brewer("Juarez"),.1)),
name = "", guide = guide_legend(reverse = TRUE, keywidth = 0.5)) +
labs(x=NULL, y=NULL) +
theme_ms() +
theme(legend.position = "none",
legend.text = element_text(size = 9, family = "Raleway"),
panel.grid.major = element_blank(),
axis.text.y = element_text(family = "Raleway", color = "gray50", size = 7),
axis.text.x = element_blank())
plotdat |>  filter(!Coicop == "Inflation") |>
ggplot(aes(x = Datum, y = Beitrag, group = Coicop, fill = Coicop)) +
geom_stream(type = "mirror") +
scale_fill_manual(values = cols, name = "") +
labs(x=NULL, y=NULL) +
theme_ms() +
theme(legend.position = "none",
panel.grid.major = element_blank(),
axis.text.y = element_text(family = "Raleway", color = "gray50", size = 7),
axis.text.x = element_blank(),
panel.background = element_rect(fill='transparent', color = NA),
plot.background = element_rect(fill='transparent', color=NA),
legend.background = element_rect(fill='transparent',color = NA))
pal <- met.brewer("Lakota")[c(2,1,5,3)]
cols <- c(rbind(lighten(pal, 0.1), darken(pal, 0.2)))
plotdat |>  filter(!Coicop == "Inflation") |>
ggplot(aes(x = Datum, y = Beitrag, group = Coicop, fill = Coicop)) +
geom_stream(type = "mirror") +
scale_fill_manual(values = cols, name = "") +
labs(x=NULL, y=NULL) +
theme_ms() +
theme(legend.position = "none",
panel.grid.major = element_blank(),
axis.text.y = element_text(family = "Raleway", color = "gray50", size = 7),
axis.text.x = element_blank(),
panel.background = element_rect(fill='transparent', color = NA),
plot.background = element_rect(fill='transparent', color=NA),
legend.background = element_rect(fill='transparent',color = NA))
ggsave("bgimage2.png", dpi = 320, width = 8, height = 2, bg = "transparent")
plotdat |>  filter(!Coicop == "Inflation") |>
ggplot(aes(x = Datum, y = Beitrag, group = Coicop, fill = Coicop)) +
geom_stream(type = "mirror") +
scale_fill_manual(values = cols, name = "") +
labs(x=NULL, y=NULL) +
theme_ms() +
theme(legend.position = "none",
panel.grid.major = element_blank(),
axis.text = element_blank(),
panel.background = element_rect(fill='transparent', color = NA),
plot.background = element_rect(fill='transparent', color=NA),
legend.background = element_rect(fill='transparent',color = NA))
ggsave("bgimage2.png", dpi = 320, width = 8, height = 3, bg = "transparent")
plotdat |>  filter(!Coicop == "Inflation") |>
ggplot(aes(x = Datum, y = Beitrag, group = Coicop, fill = Coicop)) +
geom_stream(type = "mirror") +
scale_fill_manual(values = cols, name = "") +
labs(x=NULL, y=NULL) +
coord_cartesian(expand = F) +
theme_ms() +
theme(legend.position = "none",
panel.grid.major = element_blank(),
axis.text = element_blank(),
panel.background = element_rect(fill='transparent', color = NA),
plot.background = element_rect(fill='transparent', color=NA),
legend.background = element_rect(fill='transparent',color = NA))
ggsave("bgimage2.png", dpi = 320, width = 8, height = 3, bg = "transparent")
ggsave("bgimage2.png", dpi = 320, width = 8, height = 2.5, bg = "transparent")
ggsave("bgimage2.png", dpi = 320, width = 8, height = 2.3, bg = "transparent")
